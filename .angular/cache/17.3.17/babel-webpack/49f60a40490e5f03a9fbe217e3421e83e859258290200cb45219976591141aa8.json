{"ast":null,"code":"import { IsLoggedHeaderComponent } from \"../../components/header/is-logged-header/is-logged-header.component\";\nimport { IsUnLoggedHeaderComponent } from \"../../components/header/is-un-logged-header/is-un-logged-header.component\";\nimport { FooterComponent } from \"../../components/footer/footer.component\";\nimport { CommonModule } from '@angular/common';\nimport { nowPlayingMovies } from '../../../../assets/data/mock-data';\nimport { LoginPopupComponent } from \"../../components/login-popup/login-popup.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"background-image\": a0\n});\nfunction CommunityPageComponent_app_is_logged_header_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-is-logged-header\", 8);\n    i0.ɵɵlistener(\"unsubscribeMovie\", function CommunityPageComponent_app_is_logged_header_1_Template_app_is_logged_header_unsubscribeMovie_0_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.unsubscribe($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"subscriptionCount\", ctx_r1.subscriptionCount)(\"subscribedMovies\", ctx_r1.getSubscribedMovies());\n  }\n}\nfunction CommunityPageComponent_app_is_un_logged_header_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-is-un-logged-header\");\n  }\n}\nfunction CommunityPageComponent_div_7_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const movie_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind3(2, 1, movie_r4.overview, 0, 100), \"...\");\n  }\n}\nfunction CommunityPageComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"div\", 10);\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 11);\n    i0.ɵɵtemplate(5, CommunityPageComponent_div_7_p_5_Template, 3, 5, \"p\", 12);\n    i0.ɵɵelementStart(6, \"span\", 13);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function CommunityPageComponent_div_7_Template_button_click_11_listener() {\n      const movie_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleSubscription(movie_r4));\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const movie_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(9, _c0, \"url(https://image.tmdb.org/t/p/w400\" + movie_r4.poster_path + \")\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(movie_r4.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", movie_r4.overview.length > 100);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"+ \", movie_r4.vote_average.toFixed(0), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 6, movie_r4.release_date, \"yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isLoggedIn ? ctx_r1.subscribedMovies.has(movie_r4.id) ? \"Subscribed\" : \"Subscribe\" : \"Subscribe\", \" \");\n  }\n}\nfunction CommunityPageComponent_app_login_popup_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-login-popup\", 16);\n    i0.ɵɵlistener(\"closed\", function CommunityPageComponent_app_login_popup_8_Template_app_login_popup_closed_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.closeLogin());\n    })(\"loggedIn\", function CommunityPageComponent_app_login_popup_8_Template_app_login_popup_loggedIn_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleLoggedIn($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport let CommunityPageComponent = /*#__PURE__*/(() => {\n  class CommunityPageComponent {\n    authService;\n    subscribedMovies = new Set();\n    movies = nowPlayingMovies;\n    isLoggedIn = false;\n    showLogin = false;\n    constructor(authService) {\n      this.authService = authService;\n    }\n    ngOnInit() {\n      this.authService.loggedIn$.subscribe(status => {\n        this.isLoggedIn = status;\n      });\n    }\n    toggleSubscription(movieId) {\n      if (this.subscribedMovies.has(movieId)) {\n        this.subscribedMovies.delete(movieId);\n      } else {\n        this.subscribedMovies.add(movieId);\n      }\n    }\n    handleSubscription(movie) {\n      if (!this.isLoggedIn) {\n        this.openLogin();\n        return;\n      }\n      this.toggleSubscription(movie.id);\n    }\n    get subscriptionCount() {\n      return this.subscribedMovies.size;\n    }\n    unsubscribe(movieId) {\n      this.subscribedMovies.delete(movieId);\n    }\n    getSubscribedMovies() {\n      return this.movies.filter(movie => this.subscribedMovies.has(movie.id)).map(movie => ({\n        id: movie.id,\n        title: movie.title\n      }));\n    }\n    openLogin() {\n      this.showLogin = true;\n    }\n    closeLogin() {\n      this.showLogin = false;\n    }\n    handleLoggedIn(data) {\n      this.showLogin = false;\n    }\n    static ɵfac = function CommunityPageComponent_Factory(t) {\n      return new (t || CommunityPageComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CommunityPageComponent,\n      selectors: [[\"app-community-page\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 10,\n      vars: 4,\n      consts: [[1, \"container\"], [3, \"subscriptionCount\", \"subscribedMovies\", \"unsubscribeMovie\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"content-section\"], [1, \"section-title\"], [1, \"movie-list\"], [\"class\", \"movie-card\", 4, \"ngFor\", \"ngForOf\"], [3, \"closed\", \"loggedIn\", 4, \"ngIf\"], [3, \"unsubscribeMovie\", \"subscriptionCount\", \"subscribedMovies\"], [1, \"movie-card\"], [1, \"movie-background\", 3, \"ngStyle\"], [1, \"movie-info\"], [\"class\", \"overview\", 4, \"ngIf\"], [1, \"rating\"], [1, \"subscribe-button\", 3, \"click\"], [1, \"overview\"], [3, \"closed\", \"loggedIn\"]],\n      template: function CommunityPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementContainerStart(0, 0);\n          i0.ɵɵtemplate(1, CommunityPageComponent_app_is_logged_header_1_Template, 1, 2, \"app-is-logged-header\", 1)(2, CommunityPageComponent_app_is_un_logged_header_2_Template, 1, 0, \"app-is-un-logged-header\", 2);\n          i0.ɵɵelementStart(3, \"div\", 3)(4, \"h2\", 4);\n          i0.ɵɵtext(5, \"Cinema News \\u2013 latest news from the world of cinema and even more\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 5);\n          i0.ɵɵtemplate(7, CommunityPageComponent_div_7_Template, 13, 11, \"div\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(8, CommunityPageComponent_app_login_popup_8_Template, 1, 0, \"app-login-popup\", 7);\n          i0.ɵɵelement(9, \"app-footer\");\n          i0.ɵɵelementContainerEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.movies);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showLogin);\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf, i2.NgIf, i2.NgStyle, i2.SlicePipe, i2.DatePipe, IsLoggedHeaderComponent, IsUnLoggedHeaderComponent, FooterComponent, LoginPopupComponent],\n      styles: [\".container[_ngcontent-%COMP%]{display:flex}.content-section[_ngcontent-%COMP%]{padding-top:150px;padding-left:80px}.section-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:600;font-size:36px;color:#fff}.movie-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:100px;margin-top:30px}.movie-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:10px;overflow:hidden;transition:transform .3s ease-in-out;margin-top:20px;margin-right:15px;width:350px;height:400px;padding:30px;background-color:#1a1a1a}.movie-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.movie-card[_ngcontent-%COMP%]   .movie-background[_ngcontent-%COMP%]{position:absolute;inset:0;background-size:cover;background-position:center;opacity:.3;z-index:1}.movie-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]{z-index:2;color:#fff;text-align:center}.movie-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-left:10px;opacity:.8}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{font-weight:700;color:#00c832}.movie-card[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:10px 0 5px;line-height:1.4;max-height:60px;overflow:hidden;text-overflow:ellipsis;text-align:center}.subscribe-button[_ngcontent-%COMP%]{margin-top:10px;padding:8px 20px;font-size:14px;font-weight:600;border:none;border-radius:25px;background:#00b649;color:#fff;cursor:pointer;transition:background-color .3s ease,transform .2s ease;z-index:5}.subscribe-button[_ngcontent-%COMP%]:hover{background:#00eaff;transform:scale(1.05)}.subscribe-button[_ngcontent-%COMP%]:active{transform:scale(.97)}\"]\n    });\n  }\n  return CommunityPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}