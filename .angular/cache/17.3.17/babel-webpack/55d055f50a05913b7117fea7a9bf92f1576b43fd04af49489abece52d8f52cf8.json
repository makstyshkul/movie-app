{"ast":null,"code":"import { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FooterComponent } from \"../../components/footer/footer.component\";\nimport { IsLoggedHeaderComponent } from \"../../components/header/is-logged-header/is-logged-header.component\";\nimport { IsUnLoggedHeaderComponent } from \"../../components/header/is-un-logged-header/is-un-logged-header.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/movie.service\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"../../services/auth.service\";\nimport * as i5 from \"@angular/common\";\nfunction MoviePageComponent_app_is_logged_header_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-is-logged-header\");\n  }\n}\nfunction MoviePageComponent_app_is_un_logged_header_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-is-un-logged-header\");\n  }\n}\nfunction MoviePageComponent_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"h1\", 14);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 15);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 16);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"background-image\", \"url(https://image.tmdb.org/t/p/original\" + ctx_r1.movie.backdrop_path + \")\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Release: \", ctx_r1.movie.release_date, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u2B50 \", i0.ɵɵpipeBind2(8, 5, ctx_r1.movie.vote_average, \"1.1-1\"), \"/10\");\n  }\n}\nfunction MoviePageComponent_div_3_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 17);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", \"https://image.tmdb.org/t/p/w300\" + ctx_r1.movie.poster_path, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r1.movie.title);\n  }\n}\nfunction MoviePageComponent_div_3_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"h3\");\n    i0.ɵɵtext(2, \"Watch Trailer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"iframe\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r1.trailerUrl, i0.ɵɵsanitizeResourceUrl);\n  }\n}\nfunction MoviePageComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, MoviePageComponent_div_3_div_1_Template, 9, 8, \"div\", 5);\n    i0.ɵɵelementStart(2, \"div\", 6);\n    i0.ɵɵtemplate(3, MoviePageComponent_div_3_img_3_Template, 1, 2, \"img\", 7);\n    i0.ɵɵelementStart(4, \"div\", 8)(5, \"h2\");\n    i0.ɵɵtext(6, \"Overview\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 9)(10, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function MoviePageComponent_div_3_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addToWatchLater());\n    });\n    i0.ɵɵtext(11, \"\\u2795 Watch Later\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function MoviePageComponent_div_3_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.markAsWatched());\n    });\n    i0.ɵɵtext(13, \"\\u2705 Mark as Watched\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function MoviePageComponent_div_3_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleLike());\n    });\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, MoviePageComponent_div_3_div_16_Template, 4, 1, \"div\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.movie.backdrop_path);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.movie.poster_path);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.overview);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.liked ? \"\\uD83D\\uDC94 Unlike\" : \"\\u2764\\uFE0F Like\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.trailerUrl);\n  }\n}\nfunction MoviePageComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtext(1, \"Loading movie details...\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let MoviePageComponent = /*#__PURE__*/(() => {\n  class MoviePageComponent {\n    route;\n    movieService;\n    sanitizer;\n    authService;\n    movie = null;\n    trailerUrl = null;\n    liked = false;\n    isLoggedIn = false;\n    constructor(route, movieService, sanitizer, authService) {\n      this.route = route;\n      this.movieService = movieService;\n      this.sanitizer = sanitizer;\n      this.authService = authService;\n    }\n    ngOnInit() {\n      this.authService.loggedIn$.subscribe(status => {\n        this.isLoggedIn = status;\n      });\n      console.log('MoviePageComponent INIT');\n      const id = this.route.snapshot.paramMap.get('id');\n      if (id) {\n        const movieId = +id;\n        this.movieService.getMovieDetails(movieId).subscribe(movie => {\n          console.log('Fetched movie:', movie);\n          this.movie = movie;\n        });\n        this.movieService.getMovieVideos(movieId).subscribe(videos => {\n          const trailer = videos.results.find(v => v.type === 'Trailer' && v.site === 'YouTube');\n          if (trailer && trailer.key) {\n            this.trailerUrl = this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${trailer.key}`);\n          }\n        });\n      }\n    }\n    addToWatchLater() {\n      if (this.movie) {\n        this.movieService.addToWatchLater(this.movie);\n      }\n    }\n    markAsWatched() {\n      if (this.movie) {\n        this.movieService.markAsWatched(this.movie);\n      }\n    }\n    toggleLike() {\n      this.liked = !this.liked;\n      if (this.movie) {\n        this.movieService.setLiked(this.movie.id, this.liked, this.movie);\n      }\n    }\n    static ɵfac = function MoviePageComponent_Factory(t) {\n      return new (t || MoviePageComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.MovieService), i0.ɵɵdirectiveInject(i3.DomSanitizer), i0.ɵɵdirectiveInject(i4.AuthService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MoviePageComponent,\n      selectors: [[\"app-movie-page\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 7,\n      vars: 4,\n      consts: [[\"loading\", \"\"], [1, \"container\"], [4, \"ngIf\"], [\"class\", \"movie-container\", 4, \"ngIf\", \"ngIfElse\"], [1, \"movie-container\"], [\"class\", \"movie-header\", 3, \"backgroundImage\", 4, \"ngIf\"], [1, \"movie-content\"], [\"class\", \"poster\", 3, \"src\", \"alt\", 4, \"ngIf\"], [1, \"details\"], [1, \"actions\"], [3, \"click\"], [\"class\", \"trailer\", 4, \"ngIf\"], [1, \"movie-header\"], [1, \"overlay\"], [1, \"title\"], [1, \"release-date\"], [1, \"rating\"], [1, \"poster\", 3, \"src\", \"alt\"], [1, \"trailer\"], [\"width\", \"100%\", \"height\", \"400\", \"frameborder\", \"0\", \"allowfullscreen\", \"\", 3, \"src\"], [1, \"loading\"]],\n      template: function MoviePageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementContainerStart(0, 1);\n          i0.ɵɵtemplate(1, MoviePageComponent_app_is_logged_header_1_Template, 1, 0, \"app-is-logged-header\", 2)(2, MoviePageComponent_app_is_un_logged_header_2_Template, 1, 0, \"app-is-un-logged-header\", 2)(3, MoviePageComponent_div_3_Template, 17, 5, \"div\", 3)(4, MoviePageComponent_ng_template_4_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelement(6, \"app-footer\");\n          i0.ɵɵelementContainerEnd();\n        }\n        if (rf & 2) {\n          const loading_r3 = i0.ɵɵreference(5);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.movie)(\"ngIfElse\", loading_r3);\n        }\n      },\n      dependencies: [CommonModule, i5.NgIf, i5.DecimalPipe, HttpClientModule, RouterModule, FooterComponent, IsLoggedHeaderComponent, IsUnLoggedHeaderComponent],\n      styles: [\".movie-container[_ngcontent-%COMP%]{color:#fff;font-family:Arial,sans-serif;background-color:#0f0f0f;min-height:100vh}.movie-header[_ngcontent-%COMP%]{height:400px;background-size:cover;background-position:center;position:relative}.overlay[_ngcontent-%COMP%]{background-color:#0009;height:100%;padding:2rem;display:flex;flex-direction:column;justify-content:flex-end}.title[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem}.release-date[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.3rem}.movie-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:2rem;gap:2rem;flex-wrap:wrap}.poster[_ngcontent-%COMP%]{width:300px;border-radius:12px}.details[_ngcontent-%COMP%]{flex:1;max-width:600px}.actions[_ngcontent-%COMP%]{margin:1rem 0;display:flex;flex-wrap:wrap;gap:1rem}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1c1c1c;border:1px solid #555;color:#fff;padding:.6rem 1.2rem;border-radius:8px;cursor:pointer;transition:background .2s ease}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#333}.trailer[_ngcontent-%COMP%]{margin-top:2rem}.loading[_ngcontent-%COMP%]{padding:4rem;text-align:center;font-size:1.5rem;color:#ccc}\"]\n    });\n  }\n  return MoviePageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}